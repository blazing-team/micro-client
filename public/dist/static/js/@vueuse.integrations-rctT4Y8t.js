import"./vue-CtDVafEO.js";import{S as G}from"./sortablejs-DK6jXh7t.js";import{f as Z,n as R,g as j,w as _,e as k,d as ee,h as te}from"./@vue.runtime-core-KVqrk7Le.js";import{D as ne,G as oe,J as ie,z as re,r as E,c as se,L as C,i as $,a as le,s as O}from"./@vue.reactivity-Bi9M0yVH.js";import{A as J,a as ue}from"./axios-BtGIl_yX.js";import{b as ae}from"./qrcode-COaswOGQ.js";function W(e){return ne()?(oe(e),!0):!1}const z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ce=e=>typeof e<"u",B=()=>{};function M(e,o=!1,n="Timeout"){return new Promise((t,s)=>{setTimeout(o?()=>s(n):t,e)})}function fe(e){return j()}function de(...e){if(e.length!==1)return ie(...e);const o=e[0];return typeof o=="function"?re(se(()=>({get:o,set:B}))):E(o)}function Q(e,o=!0,n){fe()?Z(e,n):o?e():R(e)}function P(e,o=!1){function n(i,{flush:m="sync",deep:a=!1,timeout:y,throwOnTimeout:w}={}){let f=null;const g=[new Promise(l=>{f=_(e,h=>{i(h)!==o&&(f?f():R(()=>f==null?void 0:f()),l(h))},{flush:m,deep:a,immediate:!0})})];return y!=null&&g.push(M(y,w).then(()=>C(e)).finally(()=>f==null?void 0:f())),Promise.race(g)}function t(i,m){if(!$(i))return n(h=>h===i,m);const{flush:a="sync",deep:y=!1,timeout:w,throwOnTimeout:f}=m??{};let p=null;const l=[new Promise(h=>{p=_([e,i],([S,N])=>{o!==(S===N)&&(p?p():R(()=>p==null?void 0:p()),h(S))},{flush:a,deep:y,immediate:!0})})];return w!=null&&l.push(M(w,f).then(()=>C(e)).finally(()=>(p==null||p(),C(e)))),Promise.race(l)}function s(i){return n(m=>!!m,i)}function u(i){return t(null,i)}function c(i){return t(void 0,i)}function v(i){return n(Number.isNaN,i)}function b(i,m){return n(a=>{const y=Array.from(a);return y.includes(i)||y.includes(C(i))},m)}function A(i){return r(1,i)}function r(i=1,m){let a=-1;return n(()=>(a+=1,a>=i),m)}return Array.isArray(C(e))?{toMatch:n,toContains:b,changed:A,changedTimes:r,get not(){return P(e,!o)}}:{toMatch:n,toBe:t,toBeTruthy:s,toBeNull:u,toBeNaN:v,toBeUndefined:c,changed:A,changedTimes:r,get not(){return P(e,!o)}}}function me(e){return P(e)}const H=z?window.document:void 0;function K(e){var o;const n=C(e);return(o=n==null?void 0:n.$el)!=null?o:n}function pe(e){return JSON.parse(JSON.stringify(e))}function ve(e,o,n,t={}){var s,u,c;const{clone:v=!1,passive:b=!1,eventName:A,deep:r=!1,defaultValue:i,shouldEmit:m}=t,a=j(),y=(a==null?void 0:a.emit)||((s=a==null?void 0:a.$emit)==null?void 0:s.bind(a))||((c=(u=a==null?void 0:a.proxy)==null?void 0:u.$emit)==null?void 0:c.bind(a==null?void 0:a.proxy));let w=A;w=w||`update:${o.toString()}`;const f=l=>v?typeof v=="function"?v(l):pe(l):l,p=()=>ce(e[o])?f(e[o]):i,g=l=>{m?m(l)&&y(w,l):y(w,l)};if(b){const l=p(),h=E(l);let S=!1;return _(()=>e[o],N=>{S||(S=!0,h.value=f(N),R(()=>S=!1))}),_(h,N=>{!S&&(N!==e[o]||r)&&g(N)},{deep:r}),h}else return k({get(){return p()},set(l){g(l)}})}function he(e,o,n={}){let t;const{document:s=H,...u}=n,c={onUpdate:r=>{ge(o,r.oldIndex,r.newIndex,r)}},v=()=>{const r=typeof e=="string"?s==null?void 0:s.querySelector(e):K(e);!r||t!==void 0||(t=new G(r,{...c,...u}))},b=()=>{t==null||t.destroy(),t=void 0},A=(r,i)=>{if(i!==void 0)t==null||t.option(r,i);else return t==null?void 0:t.option(r)};return Q(v),W(b),{stop:b,start:v,option:A}}function ye(e,o,n){const t=e.children[n];e.insertBefore(o,t)}function we(e){e.parentNode&&e.parentNode.removeChild(e)}function ge(e,o,n,t=null){t!=null&&(we(t.item),ye(t.from,t.item,o));const s=$(e),u=s?[...C(e)]:C(e);if(n>=0&&n<u.length){const c=u.splice(o,1)[0];R(()=>{u.splice(n,0,c),s&&(e.value=u)})}}const De=ee({name:"UseSortable",props:{modelValue:{type:Array,required:!0},tag:{type:String,default:"div"},options:{type:Object,required:!0}},setup(e,{slots:o}){const n=ve(e,"modelValue"),t=E(),s=le(he(t,n,e.options));return()=>{if(o.default)return te(e.tag,{ref:t},o.default(s))}}});function Ee(e,o,n={}){let t;const{document:s=H,...u}=n,c={onUpdate:r=>{Ae(o,r.oldIndex,r.newIndex,r)}},v=()=>{const r=typeof e=="string"?s==null?void 0:s.querySelector(e):K(e);!r||t!==void 0||(t=new G(r,{...c,...u}))},b=()=>{t==null||t.destroy(),t=void 0},A=(r,i)=>{if(i!==void 0)t==null||t.option(r,i);else return t==null?void 0:t.option(r)};return Q(v),W(b),{stop:b,start:v,option:A}}function be(e,o,n){const t=e.children[n];e.insertBefore(o,t)}function Se(e){e.parentNode&&e.parentNode.removeChild(e)}function Ae(e,o,n,t=null){t!=null&&(Se(t.item),be(t.from,t.item,o));const s=$(e),u=s?[...C(e)]:C(e);if(n>=0&&n<u.length){const c=u.splice(o,1)[0];R(()=>{u.splice(n,0,c),s&&(e.value=u)})}}function Ie(...e){const o=typeof e[0]=="string"?e[0]:void 0,n=typeof o=="string"?1:0,t={immediate:!!n,shallow:!0,abortPrevious:!0};let s={},u=ue,c=t;const v=d=>!!(d!=null&&d.request);e.length>0+n&&(v(e[0+n])?u=e[0+n]:s=e[0+n]),e.length>1+n&&v(e[1+n])&&(u=e[1+n]),(e.length===2+n&&!v(e[1+n])||e.length===3+n)&&(c=e[e.length-1]||t);const{shallow:b,onSuccess:A=B,onError:r=B,immediate:i,resetOnExecute:m=!1}=c,a=c.initialData,y=O(),w=(b?O:E)(a),f=O(!1),p=O(!1),g=O(!1),l=O();let h=new AbortController;const S=d=>{f.value||!p.value||(h.abort(d),h=new AbortController,g.value=!0,p.value=!1,f.value=!1)},N=d=>{p.value=d,f.value=!d},X=()=>{m&&(w.value=a)},U=()=>new Promise((d,D)=>{me(f).toBe(!0).then(()=>l.value?D(l.value):d(L))}),I={then:(...d)=>U().then(...d),catch:(...d)=>U().catch(...d)};let T=0;const V=(d=o,D={})=>{l.value=void 0;const q=typeof d=="string"?d:o??D.url;if(q===void 0)return l.value=new J(J.ERR_INVALID_URL),f.value=!0,I;X(),c.abortPrevious!==!1&&S(),N(!0),T+=1;const Y=T;return g.value=!1,u(q,{...s,...typeof d=="object"?d:D,signal:h.signal}).then(x=>{if(g.value)return;y.value=x;const F=x.data;w.value=F,A(F)}).catch(x=>{l.value=x,r(x)}).finally(()=>{var x;(x=c.onFinish)==null||x.call(c),Y===T&&N(!1)}),I};i&&o&&V();const L={response:y,data:w,error:l,isFinished:f,isLoading:p,cancel:S,isAborted:g,isCanceled:g,abort:S,execute:V};return{...L,...I}}function Te(e,o){const n=de(e),t=O("");return _(n,async s=>{n.value&&z&&(t.value=await ae.toDataURL(s,o))},{immediate:!0}),t}export{De as U,Ee as a,Te as b,Ae as m,Ie as u};
