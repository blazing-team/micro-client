import"./vue-CtDVafEO.js";import{i as y,t as W}from"./echarts-E_mfcNLb.js";import{d as G,h as k,i as A,e as p,g as F,w as T,p as K,f as V,j as Z,n as q}from"./@vue.runtime-core-KVqrk7Le.js";import{s as C,K as J,i as Q,u as X}from"./@vue.reactivity-Bi9M0yVH.js";const ee=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function te(e){function o(t){return(...a)=>{if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,a)}}function i(){const t=Object.create(null);return ee.forEach(a=>{t[a]=o(a)}),t}return i()}function ne(e,o,i){T([i,e,o],([t,a,c],D,L)=>{let r=null;if(t&&a&&c){const{offsetWidth:I,offsetHeight:P}=t,j=c===!0?{}:c,{throttle:g=100,onResize:f}=j;let d=!1;const v=()=>{a.resize(),f==null||f()},z=g?W(v,g):v;r=new ResizeObserver(()=>{!d&&(d=!0,t.offsetWidth===I&&t.offsetHeight===P)||z()}),r.observe(t)}L(()=>{r&&(r.disconnect(),r=null)})})}const ie={autoresize:[Boolean,Object]},se=/^on[^a-z]/,S=e=>se.test(e);function oe(e){const o={};for(const i in e)S(i)||(o[i]=e[i]);return o}function w(e,o){const i=Q(e)?X(e):e;return i&&typeof i=="object"&&"value"in i?i.value||o:i||o}const ae="ecLoadingOptions";function ce(e,o,i){const t=A(ae,{}),a=p(()=>({...w(t,{}),...i==null?void 0:i.value}));K(()=>{const c=e.value;c&&(o.value?c.showLoading(a.value):c.hideLoading())})}const re={loading:Boolean,loadingOptions:Object},ue="x-vue-echarts",le="ecTheme",fe="ecInitOptions",pe="ecUpdateOptions",R=/(^&?~?!?)native:/;var ge=G({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...ie,...re},emits:{},inheritAttrs:!1,setup(e,{attrs:o}){const i=C(),t=C(),a=C(),c=A(le,null),D=A(fe,null),L=A(pe,null),{autoresize:r,manualUpdate:I,loading:P,loadingOptions:j}=J(e),g=p(()=>a.value||e.option||null),f=p(()=>e.theme||w(c,{})),d=p(()=>e.initOptions||w(D,{})),v=p(()=>e.updateOptions||w(L,{})),z=p(()=>oe(o)),U={},m=F().proxy.$listeners,E={};m?Object.keys(m).forEach(s=>{R.test(s)?U[s.replace(R,"$1")]=m[s]:E[s]=m[s]}):Object.keys(o).filter(s=>S(s)).forEach(s=>{let n=s.charAt(2).toLowerCase()+s.slice(3);if(n.indexOf("native:")===0){const O=`on${n.charAt(7).toUpperCase()}${n.slice(8)}`;U[O]=o[s];return}n.substring(n.length-4)==="Once"&&(n=`~${n.substring(0,n.length-4)}`),E[n]=o[s]});function _(s){if(!i.value)return;const n=t.value=y(i.value,f.value,d.value);e.group&&(n.group=e.group),Object.keys(E).forEach(h=>{let u=E[h];if(!u)return;let l=h.toLowerCase();l.charAt(0)==="~"&&(l=l.substring(1),u.__once__=!0);let x=n;if(l.indexOf("zr:")===0&&(x=n.getZr(),l=l.substring(3)),u.__once__){delete u.__once__;const B=u;u=(...Y)=>{B(...Y),x.off(l,u)}}x.on(l,u)});function O(){n&&!n.isDisposed()&&n.resize()}function M(){const h=s||g.value;h&&n.setOption(h,v.value)}r.value?q(()=>{O(),M()}):M()}function $(s,n){e.manualUpdate&&(a.value=s),t.value?t.value.setOption(s,n||{}):_(s)}function N(){t.value&&(t.value.dispose(),t.value=void 0)}let b=null;T(I,s=>{typeof b=="function"&&(b(),b=null),s||(b=T(()=>e.option,(n,O)=>{n&&(t.value?t.value.setOption(n,{notMerge:n!==O,...v.value}):_())},{deep:!0}))},{immediate:!0}),T([f,d],()=>{N(),_()},{deep:!0}),K(()=>{e.group&&t.value&&(t.value.group=e.group)});const H=te(t);return ce(t,P,j),ne(t,r,i),V(()=>{_()}),Z(()=>{N()}),{chart:t,root:i,setOption:$,nonEventAttrs:z,nativeListeners:U,...H}},render(){const e={...this.nonEventAttrs,...this.nativeListeners};return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",k(ue,e)}});export{ge as E};
