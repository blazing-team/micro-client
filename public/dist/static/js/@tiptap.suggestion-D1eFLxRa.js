const _0x54cbae=_0x4e6c;(function(_0x3506de,_0x22f117){const _0xd56fe9=_0x4e6c,_0x4f4b5d=_0x3506de();while(!![]){try{const _0x4e103f=-parseInt(_0xd56fe9(0xe0))/0x1+-parseInt(_0xd56fe9(0xd5))/0x2*(-parseInt(_0xd56fe9(0xce))/0x3)+parseInt(_0xd56fe9(0xda))/0x4+parseInt(_0xd56fe9(0xc8))/0x5+parseInt(_0xd56fe9(0xcb))/0x6*(parseInt(_0xd56fe9(0xb7))/0x7)+-parseInt(_0xd56fe9(0xb2))/0x8*(-parseInt(_0xd56fe9(0xbe))/0x9)+-parseInt(_0xd56fe9(0xcc))/0xa*(parseInt(_0xd56fe9(0xdc))/0xb);if(_0x4e103f===_0x22f117)break;else _0x4f4b5d['push'](_0x4f4b5d['shift']());}catch(_0x1370f0){_0x4f4b5d['push'](_0x4f4b5d['shift']());}}}(_0x19b0,0x21a0e));function _0x19b0(){const _0xea1722=['onKeyDown','nodeBefore','6597NYskWE','\x00]?$','getState','max','[data-decoration-id=\x22','text','range','pos','getBoundingClientRect','slice','530490qcORLK','pop','dom','38676hKnghW','378190qdSmxQ','decorationId','36BEMptX','(?:^)?','composing','random','floor','query','|$)','42374eIyhQS','items','create','id_','active','33992gDudCY','push','121UXbGtc','state','key','input','170267vbLLjg','onExit','suggestion','from','test','querySelector','span','doc','join','992HKPRcY','onUpdate','matchAll','length','view','287BeBRCC','index','inline','call','.*?(?=\x5cs'];_0x19b0=function(){return _0xea1722;};return _0x19b0();}import{P as _0x46ac85,a as _0x48134a}from'./prosemirror-state-DcLGimL2.js';import{a as _0x148956,D as _0xd54fab}from'./prosemirror-view-DEGNo2BM.js';import{o as _0x3000b9}from'./@tiptap.core-HsqG-hEX.js';function J(_0x3c6fcf){const _0x1bb115=_0x4e6c;var _0x203c8f;const {char:_0x45fb56,allowSpaces:_0x581ede,allowToIncludeChar:_0x2b2efe,allowedPrefixes:_0x408f4d,startOfLine:_0x2bed1f,$position:_0xff314}=_0x3c6fcf,_0x81381d=_0x581ede&&!_0x2b2efe,_0x45bdfc=_0x3000b9(_0x45fb56),_0x37b2ae=new RegExp('\x5cs'+_0x45bdfc+'$'),_0x5e88a1=_0x2bed1f?'^':'',_0x4dd153=_0x2b2efe?'':_0x45bdfc,_0x424ed2=_0x81381d?new RegExp(''+_0x5e88a1+_0x45bdfc+_0x1bb115(0xbb)+_0x4dd153+_0x1bb115(0xd4),'gm'):new RegExp(_0x5e88a1+_0x1bb115(0xcf)+_0x45bdfc+'[^\x5cs'+_0x4dd153+']*','gm'),_0x6821c7=((_0x203c8f=_0xff314[_0x1bb115(0xbd)])===null||_0x203c8f===void 0x0?void 0x0:_0x203c8f['isText'])&&_0xff314[_0x1bb115(0xbd)][_0x1bb115(0xc3)];if(!_0x6821c7)return null;const _0x30e9f1=_0xff314['pos']-_0x6821c7[_0x1bb115(0xb5)],_0x551aec=Array[_0x1bb115(0xac)](_0x6821c7[_0x1bb115(0xb4)](_0x424ed2))[_0x1bb115(0xc9)]();if(!_0x551aec||_0x551aec[_0x1bb115(0xdf)]===void 0x0||_0x551aec[_0x1bb115(0xb8)]===void 0x0)return null;const _0x596360=_0x551aec[_0x1bb115(0xdf)][_0x1bb115(0xc7)](Math[_0x1bb115(0xc1)](0x0,_0x551aec['index']-0x1),_0x551aec[_0x1bb115(0xb8)]),_0x273dea=new RegExp('^['+(_0x408f4d==null?void 0x0:_0x408f4d[_0x1bb115(0xb1)](''))+_0x1bb115(0xbf))[_0x1bb115(0xad)](_0x596360);if(_0x408f4d!==null&&!_0x273dea)return null;const _0x159b9a=_0x30e9f1+_0x551aec['index'];let _0x435b5a=_0x159b9a+_0x551aec[0x0][_0x1bb115(0xb5)];return _0x81381d&&_0x37b2ae['test'](_0x6821c7['slice'](_0x435b5a-0x1,_0x435b5a+0x1))&&(_0x551aec[0x0]+='\x20',_0x435b5a+=0x1),_0x159b9a<_0xff314[_0x1bb115(0xc5)]&&_0x435b5a>=_0xff314[_0x1bb115(0xc5)]?{'range':{'from':_0x159b9a,'to':_0x435b5a},'query':_0x551aec[0x0]['slice'](_0x45fb56['length']),'text':_0x551aec[0x0]}:null;}const Q=new _0x48134a(_0x54cbae(0xe2));function _0x4e6c(_0x4db5a6,_0x2e3e99){_0x4db5a6=_0x4db5a6-0xac;const _0x19b0de=_0x19b0();let _0x4e6cef=_0x19b0de[_0x4db5a6];return _0x4e6cef;}function Y({pluginKey:_0x5a6add=Q,editor:_0x92c804,char:_0x3b2831='@',allowSpaces:_0x4dd8c6=!0x1,allowToIncludeChar:_0x2e18b1=!0x1,allowedPrefixes:_0x452355=['\x20'],startOfLine:_0x25da91=!0x1,decorationTag:_0x5b3705=_0x54cbae(0xaf),decorationClass:_0x584c31='suggestion',decorationContent:_0x112bfb='',decorationEmptyClass:_0x483bd5='is-empty',command:_0x20a4bc=()=>null,items:_0x470846=()=>[],render:_0x1f2ed9=()=>({}),allow:_0x229c1e=()=>!0x0,findSuggestionMatch:_0x2bcfdd=J}){let _0x3aeff5;const _0x47a3fc=_0x1f2ed9==null?void 0x0:_0x1f2ed9(),_0x10de11=new _0x46ac85({'key':_0x5a6add,'view'(){return{'update':async(_0x39ce78,_0x30b663)=>{const _0x53b94d=_0x4e6c;var _0x20c35e,_0x44f2af,_0x1492d4,_0x5b07dd,_0x44fa98,_0x37048c,_0x27da9b;const _0x52152e=(_0x20c35e=this[_0x53b94d(0xde)])===null||_0x20c35e===void 0x0?void 0x0:_0x20c35e[_0x53b94d(0xc0)](_0x30b663),_0x186365=(_0x44f2af=this['key'])===null||_0x44f2af===void 0x0?void 0x0:_0x44f2af[_0x53b94d(0xc0)](_0x39ce78[_0x53b94d(0xdd)]),_0x1013c3=_0x52152e[_0x53b94d(0xd9)]&&_0x186365[_0x53b94d(0xd9)]&&_0x52152e[_0x53b94d(0xc4)][_0x53b94d(0xac)]!==_0x186365[_0x53b94d(0xc4)][_0x53b94d(0xac)],_0x3e476d=!_0x52152e[_0x53b94d(0xd9)]&&_0x186365[_0x53b94d(0xd9)],_0x244d05=_0x52152e[_0x53b94d(0xd9)]&&!_0x186365[_0x53b94d(0xd9)],_0x2b6ec1=!_0x3e476d&&!_0x244d05&&_0x52152e[_0x53b94d(0xd3)]!==_0x186365[_0x53b94d(0xd3)],_0x2d4e07=_0x3e476d||_0x1013c3&&_0x2b6ec1,_0x287188=_0x2b6ec1||_0x1013c3,_0xd2301a=_0x244d05||_0x1013c3&&_0x2b6ec1;if(!_0x2d4e07&&!_0x287188&&!_0xd2301a)return;const _0x4e0c97=_0xd2301a&&!_0x2d4e07?_0x52152e:_0x186365,_0x540078=_0x39ce78[_0x53b94d(0xca)][_0x53b94d(0xae)](_0x53b94d(0xc2)+_0x4e0c97['decorationId']+'\x22]');_0x3aeff5={'editor':_0x92c804,'range':_0x4e0c97['range'],'query':_0x4e0c97[_0x53b94d(0xd3)],'text':_0x4e0c97['text'],'items':[],'command':_0x112a84=>_0x20a4bc({'editor':_0x92c804,'range':_0x4e0c97['range'],'props':_0x112a84}),'decorationNode':_0x540078,'clientRect':_0x540078?()=>{const _0x148db8=_0x53b94d;var _0x5dae0f;const {decorationId:_0xeb9ebf}=(_0x5dae0f=this['key'])===null||_0x5dae0f===void 0x0?void 0x0:_0x5dae0f[_0x148db8(0xc0)](_0x92c804[_0x148db8(0xdd)]),_0x318460=_0x39ce78[_0x148db8(0xca)][_0x148db8(0xae)]('[data-decoration-id=\x22'+_0xeb9ebf+'\x22]');return(_0x318460==null?void 0x0:_0x318460[_0x148db8(0xc6)]())||null;}:null},_0x2d4e07&&((_0x1492d4=_0x47a3fc==null?void 0x0:_0x47a3fc['onBeforeStart'])===null||_0x1492d4===void 0x0||_0x1492d4[_0x53b94d(0xba)](_0x47a3fc,_0x3aeff5)),_0x287188&&((_0x5b07dd=_0x47a3fc==null?void 0x0:_0x47a3fc['onBeforeUpdate'])===null||_0x5b07dd===void 0x0||_0x5b07dd[_0x53b94d(0xba)](_0x47a3fc,_0x3aeff5)),(_0x287188||_0x2d4e07)&&(_0x3aeff5[_0x53b94d(0xd6)]=await _0x470846({'editor':_0x92c804,'query':_0x4e0c97[_0x53b94d(0xd3)]})),_0xd2301a&&((_0x44fa98=_0x47a3fc==null?void 0x0:_0x47a3fc[_0x53b94d(0xe1)])===null||_0x44fa98===void 0x0||_0x44fa98[_0x53b94d(0xba)](_0x47a3fc,_0x3aeff5)),_0x287188&&((_0x37048c=_0x47a3fc==null?void 0x0:_0x47a3fc[_0x53b94d(0xb3)])===null||_0x37048c===void 0x0||_0x37048c[_0x53b94d(0xba)](_0x47a3fc,_0x3aeff5)),_0x2d4e07&&((_0x27da9b=_0x47a3fc==null?void 0x0:_0x47a3fc['onStart'])===null||_0x27da9b===void 0x0||_0x27da9b[_0x53b94d(0xba)](_0x47a3fc,_0x3aeff5));},'destroy':()=>{const _0x2622e8=_0x4e6c;var _0x4b9374;_0x3aeff5&&((_0x4b9374=_0x47a3fc==null?void 0x0:_0x47a3fc[_0x2622e8(0xe1)])===null||_0x4b9374===void 0x0||_0x4b9374[_0x2622e8(0xba)](_0x47a3fc,_0x3aeff5));}};},'state':{'init'(){return{'active':!0x1,'range':{'from':0x0,'to':0x0},'query':null,'text':null,'composing':!0x1};},'apply'(_0x424fb7,_0x1d370b,_0x1b782c,_0x1d450b){const _0x182813=_0x4e6c,{isEditable:_0x5b675f}=_0x92c804,{composing:_0x21fb73}=_0x92c804[_0x182813(0xb6)],{selection:_0x452162}=_0x424fb7,{empty:_0x36dba1,from:_0x767362}=_0x452162,_0x7964ee={..._0x1d370b};if(_0x7964ee[_0x182813(0xd0)]=_0x21fb73,_0x5b675f&&(_0x36dba1||_0x92c804[_0x182813(0xb6)][_0x182813(0xd0)])){(_0x767362<_0x1d370b['range']['from']||_0x767362>_0x1d370b['range']['to'])&&!_0x21fb73&&!_0x1d370b[_0x182813(0xd0)]&&(_0x7964ee['active']=!0x1);const _0x33716c=_0x2bcfdd({'char':_0x3b2831,'allowSpaces':_0x4dd8c6,'allowToIncludeChar':_0x2e18b1,'allowedPrefixes':_0x452355,'startOfLine':_0x25da91,'$position':_0x452162['$from']}),_0x48af90=_0x182813(0xd8)+Math[_0x182813(0xd2)](Math[_0x182813(0xd1)]()*0xffffffff);_0x33716c&&_0x229c1e({'editor':_0x92c804,'state':_0x1d450b,'range':_0x33716c[_0x182813(0xc4)],'isActive':_0x1d370b['active']})?(_0x7964ee[_0x182813(0xd9)]=!0x0,_0x7964ee[_0x182813(0xcd)]=_0x1d370b[_0x182813(0xcd)]?_0x1d370b[_0x182813(0xcd)]:_0x48af90,_0x7964ee['range']=_0x33716c[_0x182813(0xc4)],_0x7964ee[_0x182813(0xd3)]=_0x33716c['query'],_0x7964ee['text']=_0x33716c[_0x182813(0xc3)]):_0x7964ee[_0x182813(0xd9)]=!0x1;}else _0x7964ee[_0x182813(0xd9)]=!0x1;return _0x7964ee[_0x182813(0xd9)]||(_0x7964ee[_0x182813(0xcd)]=null,_0x7964ee[_0x182813(0xc4)]={'from':0x0,'to':0x0},_0x7964ee[_0x182813(0xd3)]=null,_0x7964ee[_0x182813(0xc3)]=null),_0x7964ee;}},'props':{'handleKeyDown'(_0x513307,_0x16f1b9){const _0x2db791=_0x4e6c;var _0xe59fce;const {active:_0x294458,range:_0x370c6b}=_0x10de11[_0x2db791(0xc0)](_0x513307[_0x2db791(0xdd)]);return _0x294458&&((_0xe59fce=_0x47a3fc==null?void 0x0:_0x47a3fc[_0x2db791(0xbc)])===null||_0xe59fce===void 0x0?void 0x0:_0xe59fce[_0x2db791(0xba)](_0x47a3fc,{'view':_0x513307,'event':_0x16f1b9,'range':_0x370c6b}))||!0x1;},'decorations'(_0xa91915){const _0x3eb70e=_0x4e6c,{active:_0x4a66e5,range:_0x22c5da,decorationId:_0x4f291d,query:_0x490585}=_0x10de11['getState'](_0xa91915);if(!_0x4a66e5)return null;const _0x4c5a58=!(_0x490585!=null&&_0x490585[_0x3eb70e(0xb5)]),_0x2f0ddd=[_0x584c31];return _0x4c5a58&&_0x2f0ddd[_0x3eb70e(0xdb)](_0x483bd5),_0x148956[_0x3eb70e(0xd7)](_0xa91915[_0x3eb70e(0xb0)],[_0xd54fab[_0x3eb70e(0xb9)](_0x22c5da[_0x3eb70e(0xac)],_0x22c5da['to'],{'nodeName':_0x5b3705,'class':_0x2f0ddd[_0x3eb70e(0xb1)]('\x20'),'data-decoration-id':_0x4f291d,'data-decoration-content':_0x112bfb})]);}}});return _0x10de11;}export{Y as S};