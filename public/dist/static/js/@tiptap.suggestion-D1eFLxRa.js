const _0x4c83d6=_0xa5d3;(function(_0x449b0b,_0x256e2b){const _0x4ef458=_0xa5d3,_0x14211a=_0x449b0b();while(!![]){try{const _0x11038f=-parseInt(_0x4ef458(0x15f))/0x1*(parseInt(_0x4ef458(0x166))/0x2)+-parseInt(_0x4ef458(0x142))/0x3+parseInt(_0x4ef458(0x14b))/0x4+-parseInt(_0x4ef458(0x162))/0x5*(-parseInt(_0x4ef458(0x16e))/0x6)+-parseInt(_0x4ef458(0x152))/0x7+parseInt(_0x4ef458(0x168))/0x8+parseInt(_0x4ef458(0x169))/0x9;if(_0x11038f===_0x256e2b)break;else _0x14211a['push'](_0x14211a['shift']());}catch(_0x1c4a2c){_0x14211a['push'](_0x14211a['shift']());}}}(_0x5cfe,0xb218e));import{P as _0x3f751c,a as _0x170df4}from'./prosemirror-state-DcLGimL2.js';function _0x5cfe(){const _0x456d76=['pop','onExit','825306dSmcrb','random','7548840AYTdgr','3574368brLnPc','query','span','composing','|$)','18CnSFra','suggestion','$from','doc','slice','index','key','getState','decorationId','active','onBeforeUpdate','1854690FWdpkA','text','pos','.*?(?=\x5cs','[data-decoration-id=\x22','join','onBeforeStart','dom','state','3027956cgLfji','[^\x5cs','is-empty','onStart','getBoundingClientRect','push','from','5450781aaKsDj','length','floor','test','range','(?:^)?','querySelector','matchAll','onUpdate','call','isText','items','view','3AKcpdH','id_','nodeBefore','2111020cOnBxr','input'];_0x5cfe=function(){return _0x456d76;};return _0x5cfe();}import{a as _0x565804,D as _0x83ab6f}from'./prosemirror-view-DEGNo2BM.js';import{o as _0x4ddd26}from'./@tiptap.core-HsqG-hEX.js';function J(_0xcf80a1){const _0x277e3e=_0xa5d3;var _0x3ddbdf;const {char:_0x49a359,allowSpaces:_0x24aa2b,allowToIncludeChar:_0x3539d9,allowedPrefixes:_0x261a4f,startOfLine:_0x462438,$position:_0x2f7f00}=_0xcf80a1,_0x1876eb=_0x24aa2b&&!_0x3539d9,_0x5ace6d=_0x4ddd26(_0x49a359),_0x723017=new RegExp('\x5cs'+_0x5ace6d+'$'),_0xd86e48=_0x462438?'^':'',_0x5425be=_0x3539d9?'':_0x5ace6d,_0x83e97=_0x1876eb?new RegExp(''+_0xd86e48+_0x5ace6d+_0x277e3e(0x145)+_0x5425be+_0x277e3e(0x16d),'gm'):new RegExp(_0xd86e48+_0x277e3e(0x157)+_0x5ace6d+_0x277e3e(0x14c)+_0x5425be+']*','gm'),_0x3f5b65=((_0x3ddbdf=_0x2f7f00['nodeBefore'])===null||_0x3ddbdf===void 0x0?void 0x0:_0x3ddbdf[_0x277e3e(0x15c)])&&_0x2f7f00[_0x277e3e(0x161)][_0x277e3e(0x143)];if(!_0x3f5b65)return null;const _0x1cc188=_0x2f7f00[_0x277e3e(0x144)]-_0x3f5b65[_0x277e3e(0x153)],_0x14d5c9=Array[_0x277e3e(0x151)](_0x3f5b65[_0x277e3e(0x159)](_0x83e97))[_0x277e3e(0x164)]();if(!_0x14d5c9||_0x14d5c9[_0x277e3e(0x163)]===void 0x0||_0x14d5c9[_0x277e3e(0x173)]===void 0x0)return null;const _0x4c1b96=_0x14d5c9[_0x277e3e(0x163)][_0x277e3e(0x172)](Math['max'](0x0,_0x14d5c9['index']-0x1),_0x14d5c9[_0x277e3e(0x173)]),_0x153f9a=new RegExp('^['+(_0x261a4f==null?void 0x0:_0x261a4f[_0x277e3e(0x147)](''))+'\x00]?$')[_0x277e3e(0x155)](_0x4c1b96);if(_0x261a4f!==null&&!_0x153f9a)return null;const _0x359e88=_0x1cc188+_0x14d5c9[_0x277e3e(0x173)];let _0x3940c0=_0x359e88+_0x14d5c9[0x0]['length'];return _0x1876eb&&_0x723017['test'](_0x3f5b65[_0x277e3e(0x172)](_0x3940c0-0x1,_0x3940c0+0x1))&&(_0x14d5c9[0x0]+='\x20',_0x3940c0+=0x1),_0x359e88<_0x2f7f00['pos']&&_0x3940c0>=_0x2f7f00[_0x277e3e(0x144)]?{'range':{'from':_0x359e88,'to':_0x3940c0},'query':_0x14d5c9[0x0][_0x277e3e(0x172)](_0x49a359[_0x277e3e(0x153)]),'text':_0x14d5c9[0x0]}:null;}function _0xa5d3(_0x338862,_0xd59ca7){_0x338862=_0x338862-0x13d;const _0x5cfe03=_0x5cfe();let _0xa5d35c=_0x5cfe03[_0x338862];return _0xa5d35c;}const Q=new _0x170df4(_0x4c83d6(0x16f));function Y({pluginKey:_0x46186a=Q,editor:_0x50f326,char:_0x39a101='@',allowSpaces:_0x36d907=!0x1,allowToIncludeChar:_0x5b40d7=!0x1,allowedPrefixes:_0x470ad1=['\x20'],startOfLine:_0x347994=!0x1,decorationTag:_0x255772=_0x4c83d6(0x16b),decorationClass:_0x21c96c=_0x4c83d6(0x16f),decorationContent:_0x39357a='',decorationEmptyClass:_0xdf9054=_0x4c83d6(0x14d),command:_0x5a2d16=()=>null,items:_0x34ffdf=()=>[],render:_0x1396ba=()=>({}),allow:_0x5a6341=()=>!0x0,findSuggestionMatch:_0x5ee99a=J}){let _0xcc64dc;const _0x431b83=_0x1396ba==null?void 0x0:_0x1396ba(),_0x124068=new _0x3f751c({'key':_0x46186a,'view'(){return{'update':async(_0x1b9301,_0x539b4e)=>{const _0x42c6e8=_0xa5d3;var _0x4adf7a,_0x49bc0d,_0x392352,_0x53bcc9,_0x5c9787,_0x1a95c3,_0x39c800;const _0x3a0985=(_0x4adf7a=this[_0x42c6e8(0x13d)])===null||_0x4adf7a===void 0x0?void 0x0:_0x4adf7a[_0x42c6e8(0x13e)](_0x539b4e),_0x1705e=(_0x49bc0d=this['key'])===null||_0x49bc0d===void 0x0?void 0x0:_0x49bc0d[_0x42c6e8(0x13e)](_0x1b9301[_0x42c6e8(0x14a)]),_0x528a01=_0x3a0985[_0x42c6e8(0x140)]&&_0x1705e[_0x42c6e8(0x140)]&&_0x3a0985[_0x42c6e8(0x156)][_0x42c6e8(0x151)]!==_0x1705e['range'][_0x42c6e8(0x151)],_0x592faf=!_0x3a0985[_0x42c6e8(0x140)]&&_0x1705e[_0x42c6e8(0x140)],_0x29cedc=_0x3a0985[_0x42c6e8(0x140)]&&!_0x1705e[_0x42c6e8(0x140)],_0x413e58=!_0x592faf&&!_0x29cedc&&_0x3a0985['query']!==_0x1705e['query'],_0xaad5b8=_0x592faf||_0x528a01&&_0x413e58,_0xa6cd4c=_0x413e58||_0x528a01,_0x10c903=_0x29cedc||_0x528a01&&_0x413e58;if(!_0xaad5b8&&!_0xa6cd4c&&!_0x10c903)return;const _0x75a6ad=_0x10c903&&!_0xaad5b8?_0x3a0985:_0x1705e,_0x7b5653=_0x1b9301[_0x42c6e8(0x149)][_0x42c6e8(0x158)](_0x42c6e8(0x146)+_0x75a6ad[_0x42c6e8(0x13f)]+'\x22]');_0xcc64dc={'editor':_0x50f326,'range':_0x75a6ad[_0x42c6e8(0x156)],'query':_0x75a6ad[_0x42c6e8(0x16a)],'text':_0x75a6ad[_0x42c6e8(0x143)],'items':[],'command':_0x3de97b=>_0x5a2d16({'editor':_0x50f326,'range':_0x75a6ad[_0x42c6e8(0x156)],'props':_0x3de97b}),'decorationNode':_0x7b5653,'clientRect':_0x7b5653?()=>{const _0xea388c=_0x42c6e8;var _0x5da14f;const {decorationId:_0xaacf15}=(_0x5da14f=this[_0xea388c(0x13d)])===null||_0x5da14f===void 0x0?void 0x0:_0x5da14f[_0xea388c(0x13e)](_0x50f326[_0xea388c(0x14a)]),_0x33af76=_0x1b9301['dom']['querySelector']('[data-decoration-id=\x22'+_0xaacf15+'\x22]');return(_0x33af76==null?void 0x0:_0x33af76[_0xea388c(0x14f)]())||null;}:null},_0xaad5b8&&((_0x392352=_0x431b83==null?void 0x0:_0x431b83[_0x42c6e8(0x148)])===null||_0x392352===void 0x0||_0x392352[_0x42c6e8(0x15b)](_0x431b83,_0xcc64dc)),_0xa6cd4c&&((_0x53bcc9=_0x431b83==null?void 0x0:_0x431b83[_0x42c6e8(0x141)])===null||_0x53bcc9===void 0x0||_0x53bcc9[_0x42c6e8(0x15b)](_0x431b83,_0xcc64dc)),(_0xa6cd4c||_0xaad5b8)&&(_0xcc64dc[_0x42c6e8(0x15d)]=await _0x34ffdf({'editor':_0x50f326,'query':_0x75a6ad[_0x42c6e8(0x16a)]})),_0x10c903&&((_0x5c9787=_0x431b83==null?void 0x0:_0x431b83['onExit'])===null||_0x5c9787===void 0x0||_0x5c9787[_0x42c6e8(0x15b)](_0x431b83,_0xcc64dc)),_0xa6cd4c&&((_0x1a95c3=_0x431b83==null?void 0x0:_0x431b83[_0x42c6e8(0x15a)])===null||_0x1a95c3===void 0x0||_0x1a95c3['call'](_0x431b83,_0xcc64dc)),_0xaad5b8&&((_0x39c800=_0x431b83==null?void 0x0:_0x431b83[_0x42c6e8(0x14e)])===null||_0x39c800===void 0x0||_0x39c800[_0x42c6e8(0x15b)](_0x431b83,_0xcc64dc));},'destroy':()=>{const _0x40d0b2=_0xa5d3;var _0x88c876;_0xcc64dc&&((_0x88c876=_0x431b83==null?void 0x0:_0x431b83[_0x40d0b2(0x165)])===null||_0x88c876===void 0x0||_0x88c876['call'](_0x431b83,_0xcc64dc));}};},'state':{'init'(){return{'active':!0x1,'range':{'from':0x0,'to':0x0},'query':null,'text':null,'composing':!0x1};},'apply'(_0x470722,_0x290649,_0x2bd2d0,_0x1ab8ea){const _0x4a6430=_0xa5d3,{isEditable:_0x54736e}=_0x50f326,{composing:_0x3fe6cb}=_0x50f326[_0x4a6430(0x15e)],{selection:_0x435d40}=_0x470722,{empty:_0x461d56,from:_0x5b58ef}=_0x435d40,_0x34bd5c={..._0x290649};if(_0x34bd5c['composing']=_0x3fe6cb,_0x54736e&&(_0x461d56||_0x50f326[_0x4a6430(0x15e)][_0x4a6430(0x16c)])){(_0x5b58ef<_0x290649[_0x4a6430(0x156)][_0x4a6430(0x151)]||_0x5b58ef>_0x290649[_0x4a6430(0x156)]['to'])&&!_0x3fe6cb&&!_0x290649[_0x4a6430(0x16c)]&&(_0x34bd5c[_0x4a6430(0x140)]=!0x1);const _0x502351=_0x5ee99a({'char':_0x39a101,'allowSpaces':_0x36d907,'allowToIncludeChar':_0x5b40d7,'allowedPrefixes':_0x470ad1,'startOfLine':_0x347994,'$position':_0x435d40[_0x4a6430(0x170)]}),_0x535043=_0x4a6430(0x160)+Math[_0x4a6430(0x154)](Math[_0x4a6430(0x167)]()*0xffffffff);_0x502351&&_0x5a6341({'editor':_0x50f326,'state':_0x1ab8ea,'range':_0x502351[_0x4a6430(0x156)],'isActive':_0x290649[_0x4a6430(0x140)]})?(_0x34bd5c[_0x4a6430(0x140)]=!0x0,_0x34bd5c[_0x4a6430(0x13f)]=_0x290649['decorationId']?_0x290649[_0x4a6430(0x13f)]:_0x535043,_0x34bd5c[_0x4a6430(0x156)]=_0x502351[_0x4a6430(0x156)],_0x34bd5c['query']=_0x502351[_0x4a6430(0x16a)],_0x34bd5c[_0x4a6430(0x143)]=_0x502351['text']):_0x34bd5c['active']=!0x1;}else _0x34bd5c[_0x4a6430(0x140)]=!0x1;return _0x34bd5c[_0x4a6430(0x140)]||(_0x34bd5c[_0x4a6430(0x13f)]=null,_0x34bd5c[_0x4a6430(0x156)]={'from':0x0,'to':0x0},_0x34bd5c['query']=null,_0x34bd5c['text']=null),_0x34bd5c;}},'props':{'handleKeyDown'(_0x13112a,_0x1716c3){const _0xc85b25=_0xa5d3;var _0x5328bb;const {active:_0x144d0c,range:_0x169b52}=_0x124068[_0xc85b25(0x13e)](_0x13112a[_0xc85b25(0x14a)]);return _0x144d0c&&((_0x5328bb=_0x431b83==null?void 0x0:_0x431b83['onKeyDown'])===null||_0x5328bb===void 0x0?void 0x0:_0x5328bb[_0xc85b25(0x15b)](_0x431b83,{'view':_0x13112a,'event':_0x1716c3,'range':_0x169b52}))||!0x1;},'decorations'(_0x429712){const _0x2ecf79=_0xa5d3,{active:_0x486eb4,range:_0x514164,decorationId:_0x2a5331,query:_0x559df3}=_0x124068[_0x2ecf79(0x13e)](_0x429712);if(!_0x486eb4)return null;const _0x3d448b=!(_0x559df3!=null&&_0x559df3['length']),_0x55ba11=[_0x21c96c];return _0x3d448b&&_0x55ba11[_0x2ecf79(0x150)](_0xdf9054),_0x565804['create'](_0x429712[_0x2ecf79(0x171)],[_0x83ab6f['inline'](_0x514164[_0x2ecf79(0x151)],_0x514164['to'],{'nodeName':_0x255772,'class':_0x55ba11[_0x2ecf79(0x147)]('\x20'),'data-decoration-id':_0x2a5331,'data-decoration-content':_0x39357a})]);}}});return _0x124068;}export{Y as S};