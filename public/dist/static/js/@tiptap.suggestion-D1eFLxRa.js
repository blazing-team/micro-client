const _0x113064=_0x4308;(function(_0x49db84,_0x4d0e02){const _0x59939c=_0x4308,_0x38f21b=_0x49db84();while(!![]){try{const _0x139316=-parseInt(_0x59939c(0x142))/0x1+-parseInt(_0x59939c(0x13c))/0x2+parseInt(_0x59939c(0x14d))/0x3*(parseInt(_0x59939c(0x13d))/0x4)+parseInt(_0x59939c(0x13b))/0x5+parseInt(_0x59939c(0x131))/0x6+parseInt(_0x59939c(0x143))/0x7+-parseInt(_0x59939c(0x147))/0x8;if(_0x139316===_0x4d0e02)break;else _0x38f21b['push'](_0x38f21b['shift']());}catch(_0x11e376){_0x38f21b['push'](_0x38f21b['shift']());}}}(_0x1f00,0x56cd9));import{P as _0x5e2db3,a as _0x49fae8}from'./prosemirror-state-DcLGimL2.js';function _0x1f00(){const _0x3a55a9=['slice','223252fyHYpP','2790690ifgLum','state','is-empty','query','8532008PpNcCp','suggestion','view','nodeBefore','onUpdate','length','393dSSBhR','join','span','text','input','call','active','\x00]?$','getState','onBeforeStart','floor','onKeyDown','[data-decoration-id=\x22','doc','test','isText','querySelector','pop','$from','getBoundingClientRect','decorationId','2626314FIOUmF','onExit','composing','[^\x5cs','pos','id_','onStart','from','key','index','3517210oozxlH','254640RmsVqX','7108NQbfaD','range','dom','create'];_0x1f00=function(){return _0x3a55a9;};return _0x1f00();}function _0x4308(_0x5926ae,_0xc73793){_0x5926ae=_0x5926ae-0x121;const _0x1f008c=_0x1f00();let _0x4308fe=_0x1f008c[_0x5926ae];return _0x4308fe;}import{a as _0x45c93d,D as _0x5186e4}from'./prosemirror-view-DEGNo2BM.js';import{o as _0x4c0a5b}from'./@tiptap.core-HsqG-hEX.js';function J(_0x2ccd91){const _0x208229=_0x4308;var _0x362d70;const {char:_0x16dc5b,allowSpaces:_0x3b55c7,allowToIncludeChar:_0x40a42e,allowedPrefixes:_0x34f837,startOfLine:_0x436412,$position:_0x410367}=_0x2ccd91,_0x44f36f=_0x3b55c7&&!_0x40a42e,_0x42805f=_0x4c0a5b(_0x16dc5b),_0x450aa6=new RegExp('\x5cs'+_0x42805f+'$'),_0x28214d=_0x436412?'^':'',_0x38b8b4=_0x40a42e?'':_0x42805f,_0x59df99=_0x44f36f?new RegExp(''+_0x28214d+_0x42805f+'.*?(?=\x5cs'+_0x38b8b4+'|$)','gm'):new RegExp(_0x28214d+'(?:^)?'+_0x42805f+_0x208229(0x134)+_0x38b8b4+']*','gm'),_0x5ada08=((_0x362d70=_0x410367[_0x208229(0x14a)])===null||_0x362d70===void 0x0?void 0x0:_0x362d70[_0x208229(0x12b)])&&_0x410367[_0x208229(0x14a)][_0x208229(0x150)];if(!_0x5ada08)return null;const _0x1610d8=_0x410367[_0x208229(0x135)]-_0x5ada08[_0x208229(0x14c)],_0xc22776=Array[_0x208229(0x138)](_0x5ada08['matchAll'](_0x59df99))[_0x208229(0x12d)]();if(!_0xc22776||_0xc22776[_0x208229(0x151)]===void 0x0||_0xc22776[_0x208229(0x13a)]===void 0x0)return null;const _0x54c6f5=_0xc22776[_0x208229(0x151)][_0x208229(0x141)](Math['max'](0x0,_0xc22776['index']-0x1),_0xc22776[_0x208229(0x13a)]),_0x500276=new RegExp('^['+(_0x34f837==null?void 0x0:_0x34f837[_0x208229(0x14e)](''))+_0x208229(0x123))[_0x208229(0x12a)](_0x54c6f5);if(_0x34f837!==null&&!_0x500276)return null;const _0x5e9d41=_0x1610d8+_0xc22776['index'];let _0x3f0301=_0x5e9d41+_0xc22776[0x0][_0x208229(0x14c)];return _0x44f36f&&_0x450aa6[_0x208229(0x12a)](_0x5ada08[_0x208229(0x141)](_0x3f0301-0x1,_0x3f0301+0x1))&&(_0xc22776[0x0]+='\x20',_0x3f0301+=0x1),_0x5e9d41<_0x410367['pos']&&_0x3f0301>=_0x410367[_0x208229(0x135)]?{'range':{'from':_0x5e9d41,'to':_0x3f0301},'query':_0xc22776[0x0][_0x208229(0x141)](_0x16dc5b['length']),'text':_0xc22776[0x0]}:null;}const Q=new _0x49fae8(_0x113064(0x148));function Y({pluginKey:_0x1bd6a5=Q,editor:_0x9b17ad,char:_0xe7fb3b='@',allowSpaces:_0x5ecf9d=!0x1,allowToIncludeChar:_0x4356cc=!0x1,allowedPrefixes:_0x542441=['\x20'],startOfLine:_0x3213a6=!0x1,decorationTag:_0x17b1b1=_0x113064(0x14f),decorationClass:_0x5792d1='suggestion',decorationContent:_0x1ef821='',decorationEmptyClass:_0x31b4fc=_0x113064(0x145),command:_0x185ffa=()=>null,items:_0x1a268e=()=>[],render:_0x12233d=()=>({}),allow:_0x219ceb=()=>!0x0,findSuggestionMatch:_0xe57a3c=J}){let _0x34de19;const _0x5e1e4a=_0x12233d==null?void 0x0:_0x12233d(),_0x153665=new _0x5e2db3({'key':_0x1bd6a5,'view'(){return{'update':async(_0x16d2db,_0x1c3d4a)=>{const _0x104e4a=_0x4308;var _0x306e2a,_0x3f67de,_0x408837,_0x247fd6,_0x17c926,_0x2d9cc9,_0x546f14;const _0x54b53b=(_0x306e2a=this[_0x104e4a(0x139)])===null||_0x306e2a===void 0x0?void 0x0:_0x306e2a['getState'](_0x1c3d4a),_0x2c36df=(_0x3f67de=this[_0x104e4a(0x139)])===null||_0x3f67de===void 0x0?void 0x0:_0x3f67de['getState'](_0x16d2db[_0x104e4a(0x144)]),_0x83790f=_0x54b53b[_0x104e4a(0x122)]&&_0x2c36df[_0x104e4a(0x122)]&&_0x54b53b[_0x104e4a(0x13e)][_0x104e4a(0x138)]!==_0x2c36df[_0x104e4a(0x13e)][_0x104e4a(0x138)],_0x35e456=!_0x54b53b[_0x104e4a(0x122)]&&_0x2c36df[_0x104e4a(0x122)],_0xbc6148=_0x54b53b[_0x104e4a(0x122)]&&!_0x2c36df[_0x104e4a(0x122)],_0x54eec=!_0x35e456&&!_0xbc6148&&_0x54b53b[_0x104e4a(0x146)]!==_0x2c36df['query'],_0x45c1fc=_0x35e456||_0x83790f&&_0x54eec,_0x4da383=_0x54eec||_0x83790f,_0x1011f2=_0xbc6148||_0x83790f&&_0x54eec;if(!_0x45c1fc&&!_0x4da383&&!_0x1011f2)return;const _0x3bf2c8=_0x1011f2&&!_0x45c1fc?_0x54b53b:_0x2c36df,_0xe18d74=_0x16d2db['dom'][_0x104e4a(0x12c)]('[data-decoration-id=\x22'+_0x3bf2c8[_0x104e4a(0x130)]+'\x22]');_0x34de19={'editor':_0x9b17ad,'range':_0x3bf2c8['range'],'query':_0x3bf2c8['query'],'text':_0x3bf2c8[_0x104e4a(0x150)],'items':[],'command':_0x518e62=>_0x185ffa({'editor':_0x9b17ad,'range':_0x3bf2c8[_0x104e4a(0x13e)],'props':_0x518e62}),'decorationNode':_0xe18d74,'clientRect':_0xe18d74?()=>{const _0x30080c=_0x104e4a;var _0x2e40ef;const {decorationId:_0x5f3b79}=(_0x2e40ef=this[_0x30080c(0x139)])===null||_0x2e40ef===void 0x0?void 0x0:_0x2e40ef[_0x30080c(0x124)](_0x9b17ad[_0x30080c(0x144)]),_0x24e06a=_0x16d2db[_0x30080c(0x13f)]['querySelector'](_0x30080c(0x128)+_0x5f3b79+'\x22]');return(_0x24e06a==null?void 0x0:_0x24e06a[_0x30080c(0x12f)]())||null;}:null},_0x45c1fc&&((_0x408837=_0x5e1e4a==null?void 0x0:_0x5e1e4a[_0x104e4a(0x125)])===null||_0x408837===void 0x0||_0x408837[_0x104e4a(0x121)](_0x5e1e4a,_0x34de19)),_0x4da383&&((_0x247fd6=_0x5e1e4a==null?void 0x0:_0x5e1e4a['onBeforeUpdate'])===null||_0x247fd6===void 0x0||_0x247fd6['call'](_0x5e1e4a,_0x34de19)),(_0x4da383||_0x45c1fc)&&(_0x34de19['items']=await _0x1a268e({'editor':_0x9b17ad,'query':_0x3bf2c8[_0x104e4a(0x146)]})),_0x1011f2&&((_0x17c926=_0x5e1e4a==null?void 0x0:_0x5e1e4a['onExit'])===null||_0x17c926===void 0x0||_0x17c926['call'](_0x5e1e4a,_0x34de19)),_0x4da383&&((_0x2d9cc9=_0x5e1e4a==null?void 0x0:_0x5e1e4a[_0x104e4a(0x14b)])===null||_0x2d9cc9===void 0x0||_0x2d9cc9['call'](_0x5e1e4a,_0x34de19)),_0x45c1fc&&((_0x546f14=_0x5e1e4a==null?void 0x0:_0x5e1e4a[_0x104e4a(0x137)])===null||_0x546f14===void 0x0||_0x546f14[_0x104e4a(0x121)](_0x5e1e4a,_0x34de19));},'destroy':()=>{const _0x5c6d1d=_0x4308;var _0x10acfd;_0x34de19&&((_0x10acfd=_0x5e1e4a==null?void 0x0:_0x5e1e4a[_0x5c6d1d(0x132)])===null||_0x10acfd===void 0x0||_0x10acfd[_0x5c6d1d(0x121)](_0x5e1e4a,_0x34de19));}};},'state':{'init'(){return{'active':!0x1,'range':{'from':0x0,'to':0x0},'query':null,'text':null,'composing':!0x1};},'apply'(_0x2dafdc,_0x4b3ab2,_0x2c1809,_0x118860){const _0x520c82=_0x4308,{isEditable:_0x330866}=_0x9b17ad,{composing:_0x245d89}=_0x9b17ad[_0x520c82(0x149)],{selection:_0xc38c3e}=_0x2dafdc,{empty:_0x4db33b,from:_0x19dd87}=_0xc38c3e,_0x2fef9d={..._0x4b3ab2};if(_0x2fef9d[_0x520c82(0x133)]=_0x245d89,_0x330866&&(_0x4db33b||_0x9b17ad[_0x520c82(0x149)][_0x520c82(0x133)])){(_0x19dd87<_0x4b3ab2[_0x520c82(0x13e)][_0x520c82(0x138)]||_0x19dd87>_0x4b3ab2[_0x520c82(0x13e)]['to'])&&!_0x245d89&&!_0x4b3ab2[_0x520c82(0x133)]&&(_0x2fef9d[_0x520c82(0x122)]=!0x1);const _0x498b12=_0xe57a3c({'char':_0xe7fb3b,'allowSpaces':_0x5ecf9d,'allowToIncludeChar':_0x4356cc,'allowedPrefixes':_0x542441,'startOfLine':_0x3213a6,'$position':_0xc38c3e[_0x520c82(0x12e)]}),_0x590493=_0x520c82(0x136)+Math[_0x520c82(0x126)](Math['random']()*0xffffffff);_0x498b12&&_0x219ceb({'editor':_0x9b17ad,'state':_0x118860,'range':_0x498b12[_0x520c82(0x13e)],'isActive':_0x4b3ab2['active']})?(_0x2fef9d[_0x520c82(0x122)]=!0x0,_0x2fef9d['decorationId']=_0x4b3ab2[_0x520c82(0x130)]?_0x4b3ab2[_0x520c82(0x130)]:_0x590493,_0x2fef9d[_0x520c82(0x13e)]=_0x498b12[_0x520c82(0x13e)],_0x2fef9d['query']=_0x498b12[_0x520c82(0x146)],_0x2fef9d[_0x520c82(0x150)]=_0x498b12[_0x520c82(0x150)]):_0x2fef9d[_0x520c82(0x122)]=!0x1;}else _0x2fef9d[_0x520c82(0x122)]=!0x1;return _0x2fef9d[_0x520c82(0x122)]||(_0x2fef9d[_0x520c82(0x130)]=null,_0x2fef9d['range']={'from':0x0,'to':0x0},_0x2fef9d[_0x520c82(0x146)]=null,_0x2fef9d[_0x520c82(0x150)]=null),_0x2fef9d;}},'props':{'handleKeyDown'(_0x4a3f10,_0x399fec){const _0x5474fd=_0x4308;var _0x4e2cc3;const {active:_0x123de6,range:_0x16b08f}=_0x153665['getState'](_0x4a3f10[_0x5474fd(0x144)]);return _0x123de6&&((_0x4e2cc3=_0x5e1e4a==null?void 0x0:_0x5e1e4a[_0x5474fd(0x127)])===null||_0x4e2cc3===void 0x0?void 0x0:_0x4e2cc3['call'](_0x5e1e4a,{'view':_0x4a3f10,'event':_0x399fec,'range':_0x16b08f}))||!0x1;},'decorations'(_0x39d6c8){const _0x5cd4de=_0x4308,{active:_0x2c1c21,range:_0x55f4f2,decorationId:_0x4f736e,query:_0x3aa3e5}=_0x153665[_0x5cd4de(0x124)](_0x39d6c8);if(!_0x2c1c21)return null;const _0x504443=!(_0x3aa3e5!=null&&_0x3aa3e5[_0x5cd4de(0x14c)]),_0x359171=[_0x5792d1];return _0x504443&&_0x359171['push'](_0x31b4fc),_0x45c93d[_0x5cd4de(0x140)](_0x39d6c8[_0x5cd4de(0x129)],[_0x5186e4['inline'](_0x55f4f2[_0x5cd4de(0x138)],_0x55f4f2['to'],{'nodeName':_0x17b1b1,'class':_0x359171[_0x5cd4de(0x14e)]('\x20'),'data-decoration-id':_0x4f736e,'data-decoration-content':_0x1ef821})]);}}});return _0x153665;}export{Y as S};