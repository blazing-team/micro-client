const _0x2307fa=_0x18b8;function _0x1a7a(){const _0x19357f=['state','slice','onExit','call','184EZhAOR','composing','doc','decorationId','onBeforeStart','nodeBefore','view','.*?(?=\x5cs','64784WvIFVt','id_','1409628lGpUPq','length','random','[^\x5cs','pos','from','is-empty','push','1438443qRqXCy','dom','create','24262HIPBXT','suggestion','getState','\x00]?$','input','|$)','key','580461dXbGGH','133973XAcPMp','onUpdate','isText','(?:^)?','querySelector','onKeyDown','text','active','index','[data-decoration-id=\x22','query','inline','148082VOmzhe','$from','range','10pQLERM','span','items','join','test'];_0x1a7a=function(){return _0x19357f;};return _0x1a7a();}(function(_0x1f25af,_0x43a5b6){const _0x3bf205=_0x18b8,_0x2e0a70=_0x1f25af();while(!![]){try{const _0x2d0e4c=parseInt(_0x3bf205(0xc8))/0x1+-parseInt(_0x3bf205(0xd4))/0x2+parseInt(_0x3bf205(0xc7))/0x3+-parseInt(_0x3bf205(0xb3))/0x4*(-parseInt(_0x3bf205(0xd7))/0x5)+-parseInt(_0x3bf205(0xb5))/0x6+parseInt(_0x3bf205(0xc0))/0x7*(-parseInt(_0x3bf205(0xab))/0x8)+parseInt(_0x3bf205(0xbd))/0x9;if(_0x2d0e4c===_0x43a5b6)break;else _0x2e0a70['push'](_0x2e0a70['shift']());}catch(_0x3a78c1){_0x2e0a70['push'](_0x2e0a70['shift']());}}}(_0x1a7a,0x1ffa6));import{P as _0x4c3e53,a as _0xd8e541}from'./prosemirror-state-DcLGimL2.js';import{a as _0x22f658,D as _0x44cd0b}from'./prosemirror-view-DEGNo2BM.js';import{o as _0x451751}from'./@tiptap.core-HsqG-hEX.js';function J(_0x1c7a02){const _0x53b2b2=_0x18b8;var _0x2b0d43;const {char:_0x1b1bf8,allowSpaces:_0x43257a,allowToIncludeChar:_0x1df55e,allowedPrefixes:_0x48f8dd,startOfLine:_0x3b4489,$position:_0x245bc3}=_0x1c7a02,_0x1aeaeb=_0x43257a&&!_0x1df55e,_0x4c1275=_0x451751(_0x1b1bf8),_0x301714=new RegExp('\x5cs'+_0x4c1275+'$'),_0x498792=_0x3b4489?'^':'',_0x47bb5e=_0x1df55e?'':_0x4c1275,_0x241e88=_0x1aeaeb?new RegExp(''+_0x498792+_0x4c1275+_0x53b2b2(0xb2)+_0x47bb5e+_0x53b2b2(0xc5),'gm'):new RegExp(_0x498792+_0x53b2b2(0xcb)+_0x4c1275+_0x53b2b2(0xb8)+_0x47bb5e+']*','gm'),_0x1bb0bf=((_0x2b0d43=_0x245bc3[_0x53b2b2(0xb0)])===null||_0x2b0d43===void 0x0?void 0x0:_0x2b0d43[_0x53b2b2(0xca)])&&_0x245bc3[_0x53b2b2(0xb0)]['text'];if(!_0x1bb0bf)return null;const _0x18a64f=_0x245bc3[_0x53b2b2(0xb9)]-_0x1bb0bf['length'],_0x36117d=Array[_0x53b2b2(0xba)](_0x1bb0bf['matchAll'](_0x241e88))['pop']();if(!_0x36117d||_0x36117d[_0x53b2b2(0xc4)]===void 0x0||_0x36117d[_0x53b2b2(0xd0)]===void 0x0)return null;const _0x1b575c=_0x36117d['input']['slice'](Math['max'](0x0,_0x36117d[_0x53b2b2(0xd0)]-0x1),_0x36117d[_0x53b2b2(0xd0)]),_0x34ff2b=new RegExp('^['+(_0x48f8dd==null?void 0x0:_0x48f8dd[_0x53b2b2(0xda)](''))+_0x53b2b2(0xc3))[_0x53b2b2(0xdb)](_0x1b575c);if(_0x48f8dd!==null&&!_0x34ff2b)return null;const _0x1bc9db=_0x18a64f+_0x36117d['index'];let _0x5cef63=_0x1bc9db+_0x36117d[0x0][_0x53b2b2(0xb6)];return _0x1aeaeb&&_0x301714['test'](_0x1bb0bf[_0x53b2b2(0xdd)](_0x5cef63-0x1,_0x5cef63+0x1))&&(_0x36117d[0x0]+='\x20',_0x5cef63+=0x1),_0x1bc9db<_0x245bc3['pos']&&_0x5cef63>=_0x245bc3['pos']?{'range':{'from':_0x1bc9db,'to':_0x5cef63},'query':_0x36117d[0x0][_0x53b2b2(0xdd)](_0x1b1bf8[_0x53b2b2(0xb6)]),'text':_0x36117d[0x0]}:null;}const Q=new _0xd8e541(_0x2307fa(0xc1));function Y({pluginKey:_0x1a3588=Q,editor:_0x3be616,char:_0x525c34='@',allowSpaces:_0x73b865=!0x1,allowToIncludeChar:_0x52cc79=!0x1,allowedPrefixes:_0x5bfff1=['\x20'],startOfLine:_0x1ff702=!0x1,decorationTag:_0x288296=_0x2307fa(0xd8),decorationClass:_0x15bd59=_0x2307fa(0xc1),decorationContent:_0x779275='',decorationEmptyClass:_0x44cab3=_0x2307fa(0xbb),command:_0x406bc3=()=>null,items:_0x273040=()=>[],render:_0x421827=()=>({}),allow:_0x2e1a04=()=>!0x0,findSuggestionMatch:_0x57321f=J}){let _0x521764;const _0x4582b8=_0x421827==null?void 0x0:_0x421827(),_0x3ae005=new _0x4c3e53({'key':_0x1a3588,'view'(){return{'update':async(_0x1d8b02,_0x8623e2)=>{const _0x1e6edf=_0x18b8;var _0x3d809a,_0x147780,_0x401b0d,_0x420191,_0x14efb3,_0x4d7464,_0x30736b;const _0x4492a7=(_0x3d809a=this[_0x1e6edf(0xc6)])===null||_0x3d809a===void 0x0?void 0x0:_0x3d809a[_0x1e6edf(0xc2)](_0x8623e2),_0x105a81=(_0x147780=this['key'])===null||_0x147780===void 0x0?void 0x0:_0x147780[_0x1e6edf(0xc2)](_0x1d8b02[_0x1e6edf(0xdc)]),_0x33fffc=_0x4492a7['active']&&_0x105a81[_0x1e6edf(0xcf)]&&_0x4492a7[_0x1e6edf(0xd6)][_0x1e6edf(0xba)]!==_0x105a81[_0x1e6edf(0xd6)][_0x1e6edf(0xba)],_0x1a3a26=!_0x4492a7[_0x1e6edf(0xcf)]&&_0x105a81[_0x1e6edf(0xcf)],_0x454bbb=_0x4492a7[_0x1e6edf(0xcf)]&&!_0x105a81['active'],_0xa5447c=!_0x1a3a26&&!_0x454bbb&&_0x4492a7[_0x1e6edf(0xd2)]!==_0x105a81[_0x1e6edf(0xd2)],_0xbafce3=_0x1a3a26||_0x33fffc&&_0xa5447c,_0xa57bb8=_0xa5447c||_0x33fffc,_0x30b8a9=_0x454bbb||_0x33fffc&&_0xa5447c;if(!_0xbafce3&&!_0xa57bb8&&!_0x30b8a9)return;const _0x4c2e2b=_0x30b8a9&&!_0xbafce3?_0x4492a7:_0x105a81,_0x459573=_0x1d8b02[_0x1e6edf(0xbe)][_0x1e6edf(0xcc)](_0x1e6edf(0xd1)+_0x4c2e2b[_0x1e6edf(0xae)]+'\x22]');_0x521764={'editor':_0x3be616,'range':_0x4c2e2b['range'],'query':_0x4c2e2b[_0x1e6edf(0xd2)],'text':_0x4c2e2b[_0x1e6edf(0xce)],'items':[],'command':_0x1b0f15=>_0x406bc3({'editor':_0x3be616,'range':_0x4c2e2b['range'],'props':_0x1b0f15}),'decorationNode':_0x459573,'clientRect':_0x459573?()=>{const _0x5453d7=_0x1e6edf;var _0x10b99d;const {decorationId:_0x397e4c}=(_0x10b99d=this[_0x5453d7(0xc6)])===null||_0x10b99d===void 0x0?void 0x0:_0x10b99d[_0x5453d7(0xc2)](_0x3be616['state']),_0x40a3d9=_0x1d8b02['dom'][_0x5453d7(0xcc)]('[data-decoration-id=\x22'+_0x397e4c+'\x22]');return(_0x40a3d9==null?void 0x0:_0x40a3d9['getBoundingClientRect']())||null;}:null},_0xbafce3&&((_0x401b0d=_0x4582b8==null?void 0x0:_0x4582b8[_0x1e6edf(0xaf)])===null||_0x401b0d===void 0x0||_0x401b0d[_0x1e6edf(0xaa)](_0x4582b8,_0x521764)),_0xa57bb8&&((_0x420191=_0x4582b8==null?void 0x0:_0x4582b8['onBeforeUpdate'])===null||_0x420191===void 0x0||_0x420191['call'](_0x4582b8,_0x521764)),(_0xa57bb8||_0xbafce3)&&(_0x521764[_0x1e6edf(0xd9)]=await _0x273040({'editor':_0x3be616,'query':_0x4c2e2b[_0x1e6edf(0xd2)]})),_0x30b8a9&&((_0x14efb3=_0x4582b8==null?void 0x0:_0x4582b8['onExit'])===null||_0x14efb3===void 0x0||_0x14efb3[_0x1e6edf(0xaa)](_0x4582b8,_0x521764)),_0xa57bb8&&((_0x4d7464=_0x4582b8==null?void 0x0:_0x4582b8[_0x1e6edf(0xc9)])===null||_0x4d7464===void 0x0||_0x4d7464[_0x1e6edf(0xaa)](_0x4582b8,_0x521764)),_0xbafce3&&((_0x30736b=_0x4582b8==null?void 0x0:_0x4582b8['onStart'])===null||_0x30736b===void 0x0||_0x30736b[_0x1e6edf(0xaa)](_0x4582b8,_0x521764));},'destroy':()=>{const _0x208699=_0x18b8;var _0x2bc3d6;_0x521764&&((_0x2bc3d6=_0x4582b8==null?void 0x0:_0x4582b8[_0x208699(0xa9)])===null||_0x2bc3d6===void 0x0||_0x2bc3d6[_0x208699(0xaa)](_0x4582b8,_0x521764));}};},'state':{'init'(){return{'active':!0x1,'range':{'from':0x0,'to':0x0},'query':null,'text':null,'composing':!0x1};},'apply'(_0x3e40f6,_0x4b05ae,_0x39a5cd,_0x1b2e16){const _0x13ec5a=_0x18b8,{isEditable:_0x41d44b}=_0x3be616,{composing:_0x5e41bd}=_0x3be616[_0x13ec5a(0xb1)],{selection:_0x53cd61}=_0x3e40f6,{empty:_0x204dec,from:_0x485220}=_0x53cd61,_0x5cbf76={..._0x4b05ae};if(_0x5cbf76[_0x13ec5a(0xac)]=_0x5e41bd,_0x41d44b&&(_0x204dec||_0x3be616[_0x13ec5a(0xb1)][_0x13ec5a(0xac)])){(_0x485220<_0x4b05ae[_0x13ec5a(0xd6)]['from']||_0x485220>_0x4b05ae['range']['to'])&&!_0x5e41bd&&!_0x4b05ae[_0x13ec5a(0xac)]&&(_0x5cbf76[_0x13ec5a(0xcf)]=!0x1);const _0x2765c0=_0x57321f({'char':_0x525c34,'allowSpaces':_0x73b865,'allowToIncludeChar':_0x52cc79,'allowedPrefixes':_0x5bfff1,'startOfLine':_0x1ff702,'$position':_0x53cd61[_0x13ec5a(0xd5)]}),_0x548074=_0x13ec5a(0xb4)+Math['floor'](Math[_0x13ec5a(0xb7)]()*0xffffffff);_0x2765c0&&_0x2e1a04({'editor':_0x3be616,'state':_0x1b2e16,'range':_0x2765c0['range'],'isActive':_0x4b05ae[_0x13ec5a(0xcf)]})?(_0x5cbf76['active']=!0x0,_0x5cbf76[_0x13ec5a(0xae)]=_0x4b05ae['decorationId']?_0x4b05ae[_0x13ec5a(0xae)]:_0x548074,_0x5cbf76['range']=_0x2765c0[_0x13ec5a(0xd6)],_0x5cbf76[_0x13ec5a(0xd2)]=_0x2765c0[_0x13ec5a(0xd2)],_0x5cbf76[_0x13ec5a(0xce)]=_0x2765c0[_0x13ec5a(0xce)]):_0x5cbf76[_0x13ec5a(0xcf)]=!0x1;}else _0x5cbf76[_0x13ec5a(0xcf)]=!0x1;return _0x5cbf76['active']||(_0x5cbf76[_0x13ec5a(0xae)]=null,_0x5cbf76[_0x13ec5a(0xd6)]={'from':0x0,'to':0x0},_0x5cbf76[_0x13ec5a(0xd2)]=null,_0x5cbf76[_0x13ec5a(0xce)]=null),_0x5cbf76;}},'props':{'handleKeyDown'(_0x2a8740,_0x4262bb){const _0x52a10a=_0x18b8;var _0x1a6446;const {active:_0x712db5,range:_0x156435}=_0x3ae005[_0x52a10a(0xc2)](_0x2a8740[_0x52a10a(0xdc)]);return _0x712db5&&((_0x1a6446=_0x4582b8==null?void 0x0:_0x4582b8[_0x52a10a(0xcd)])===null||_0x1a6446===void 0x0?void 0x0:_0x1a6446[_0x52a10a(0xaa)](_0x4582b8,{'view':_0x2a8740,'event':_0x4262bb,'range':_0x156435}))||!0x1;},'decorations'(_0x1157da){const _0x3a3164=_0x18b8,{active:_0x5681f7,range:_0x395d1b,decorationId:_0x1bd488,query:_0x386a35}=_0x3ae005[_0x3a3164(0xc2)](_0x1157da);if(!_0x5681f7)return null;const _0x2872e1=!(_0x386a35!=null&&_0x386a35[_0x3a3164(0xb6)]),_0x48ab17=[_0x15bd59];return _0x2872e1&&_0x48ab17[_0x3a3164(0xbc)](_0x44cab3),_0x22f658[_0x3a3164(0xbf)](_0x1157da[_0x3a3164(0xad)],[_0x44cd0b[_0x3a3164(0xd3)](_0x395d1b['from'],_0x395d1b['to'],{'nodeName':_0x288296,'class':_0x48ab17[_0x3a3164(0xda)]('\x20'),'data-decoration-id':_0x1bd488,'data-decoration-content':_0x779275})]);}}});return _0x3ae005;}function _0x18b8(_0x44001b,_0x450ed4){_0x44001b=_0x44001b-0xa9;const _0x1a7a01=_0x1a7a();let _0x18b8fd=_0x1a7a01[_0x44001b];return _0x18b8fd;}export{Y as S};